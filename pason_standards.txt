
4.1 About Handshaking Setting up and maintaining WITS communication between a WITS device and the EDR requires the use of a handshake. The handshake is important because it prompts the EDR to recognize that a WITS device has been connected to the system, and is necessary for the EDR to keep WITS communication active. If you connected the WITS device via a toolpush connection box or a network panel, handshaking also prompts the EDR to display a WITS protocol in the Comm Port Setup screen, so handshaking is useful for determining which ports are connected to WITS devices. Important: Failure to continuously send at least one packet to the EDR every 30 seconds causes the EDR’s communication engine to time out, stopping WITS communication. This is a major cause of WITS communication problems. Establishing and Maintaining WITS Communication To establish and maintain WITS communication with the EDR, the third-party WITS device must send at least one WITS packet to the EDR continuously every 30 seconds, even if the third-party has no other need to send WITS packets. The only exception to this requirement is when the WITS device is connected via a toolpush connection box or a network panel, and the EDR comm port is set to Send Only. The handshaking requirement can be met in one of the following two ways: • The third-party WITS device continuously sends at least one WITS packet to the EDR every 30 seconds as part of the desired operation, or • The third-party WITS device is set up to continuously send a handshaking packet to the EDR every 30 seconds. Pason recommends continuously sending a TVD WITS packet configured as shown in Figure 11. The EDR is coded to recognize and use this specific packet for maintaining WITS communication, but can also receive TVD WITS packets with actual values from other WITS devices at the Revision 40 of DOCU225, © Copyright Page 17 of 54 Revised October 30, 2023 same time. The EDR is capable of receiving this handshaking packet from multiple WITS devices simultaneously. Be sure to include all of the carriage return and line feed characters shown below. &&<cr><lf> 0111-9999<cr><lf> !!<cr><lf> Figure 11: Recommended WITS handshaking packet 


2.2 Duplex Communication Pason recommends full duplex communication when using WITS. With full duplex communication, data can travel in two directions simultaneously. This is different than half duplex communication, which allows data to travel in one direction at a time, like voices on walkie-talkie radios. 2.3 Handshaking Establishing and maintaining WITS communication between connected WITS devices and the EDR requires a handshaking procedure. For details about how to complete the handshaking process, see About Handshaking on page 17. 2.4 About WITS Levels and Packets  The Pason system uses WITS Level 0 for communications. In Send and Receive mode, the EDR transmits a number of WITS Level 0 packets (1 packet in Half WITS mode, approximately 8 packets in Full WITS mode) each time it receives a valid WITS Level 0 packet. 2.5 What is the 1984PASON/EDR Header Every WITS record the Pason EDR sends includes a 1984PASON/EDR header. This does not exactly meet the WITS specification, which specifies that items from different Revision 40 of DOCU225, © Copyright Page 7 of 54 Revised October 30, 2023 records should be in different packets. However, this item is required due to the half duplex nature of our communication cables. The EDR uses this header to distinguish between sent data and received data.  If a WITS device requires the removal of the 1984PASON/EDR header, ensure that the device is connected to the EDR via a COMM022, and that its EDR comm port is set to Send Only. Refer to Setting the Send/Receive Mode on page 20 for step-by-step instructions. 